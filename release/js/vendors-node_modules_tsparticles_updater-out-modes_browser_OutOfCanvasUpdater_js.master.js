"use strict";
(self["webpackChunkvshb_local"] = self["webpackChunkvshb_local"] || []).push([["vendors-node_modules_tsparticles_updater-out-modes_browser_OutOfCanvasUpdater_js"],{

/***/ "./node_modules/@tsparticles/updater-out-modes/browser/BounceOutMode.js":
/*!******************************************************************************!*\
  !*** ./node_modules/@tsparticles/updater-out-modes/browser/BounceOutMode.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BounceOutMode: () => (/* binding */ BounceOutMode)
/* harmony export */ });
/* harmony import */ var _tsparticles_engine__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tsparticles/engine */ "./node_modules/@tsparticles/engine/browser/index.js");
/* harmony import */ var _Utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Utils.js */ "./node_modules/@tsparticles/updater-out-modes/browser/Utils.js");


class BounceOutMode {
    constructor(container) {
        this.container = container;
        this.modes = [
            "bounce",
            "split",
        ];
    }
    update(particle, direction, delta, outMode) {
        if (!this.modes.includes(outMode)) {
            return;
        }
        const container = this.container;
        let handled = false;
        for (const [, plugin] of container.plugins) {
            if (plugin.particleBounce !== undefined) {
                handled = plugin.particleBounce(particle, delta, direction);
            }
            if (handled) {
                break;
            }
        }
        if (handled) {
            return;
        }
        const pos = particle.getPosition(), offset = particle.offset, size = particle.getRadius(), bounds = (0,_tsparticles_engine__WEBPACK_IMPORTED_MODULE_0__.calculateBounds)(pos, size), canvasSize = container.canvas.size;
        (0,_Utils_js__WEBPACK_IMPORTED_MODULE_1__.bounceHorizontal)({ particle, outMode, direction, bounds, canvasSize, offset, size });
        (0,_Utils_js__WEBPACK_IMPORTED_MODULE_1__.bounceVertical)({ particle, outMode, direction, bounds, canvasSize, offset, size });
    }
}


/***/ }),

/***/ "./node_modules/@tsparticles/updater-out-modes/browser/DestroyOutMode.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@tsparticles/updater-out-modes/browser/DestroyOutMode.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DestroyOutMode: () => (/* binding */ DestroyOutMode)
/* harmony export */ });
/* harmony import */ var _tsparticles_engine__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tsparticles/engine */ "./node_modules/@tsparticles/engine/browser/index.js");

const minVelocity = 0;
class DestroyOutMode {
    constructor(container) {
        this.container = container;
        this.modes = ["destroy"];
    }
    update(particle, direction, _delta, outMode) {
        if (!this.modes.includes(outMode)) {
            return;
        }
        const container = this.container;
        switch (particle.outType) {
            case "normal":
            case "outside":
                if ((0,_tsparticles_engine__WEBPACK_IMPORTED_MODULE_0__.isPointInside)(particle.position, container.canvas.size, _tsparticles_engine__WEBPACK_IMPORTED_MODULE_0__.Vector.origin, particle.getRadius(), direction)) {
                    return;
                }
                break;
            case "inside": {
                const { dx, dy } = (0,_tsparticles_engine__WEBPACK_IMPORTED_MODULE_0__.getDistances)(particle.position, particle.moveCenter), { x: vx, y: vy } = particle.velocity;
                if ((vx < minVelocity && dx > particle.moveCenter.radius) ||
                    (vy < minVelocity && dy > particle.moveCenter.radius) ||
                    (vx >= minVelocity && dx < -particle.moveCenter.radius) ||
                    (vy >= minVelocity && dy < -particle.moveCenter.radius)) {
                    return;
                }
                break;
            }
        }
        container.particles.remove(particle, undefined, true);
    }
}


/***/ }),

/***/ "./node_modules/@tsparticles/updater-out-modes/browser/NoneOutMode.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@tsparticles/updater-out-modes/browser/NoneOutMode.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   NoneOutMode: () => (/* binding */ NoneOutMode)
/* harmony export */ });
/* harmony import */ var _tsparticles_engine__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tsparticles/engine */ "./node_modules/@tsparticles/engine/browser/index.js");

const minVelocity = 0;
class NoneOutMode {
    constructor(container) {
        this.container = container;
        this.modes = ["none"];
    }
    update(particle, direction, delta, outMode) {
        if (!this.modes.includes(outMode)) {
            return;
        }
        if ((particle.options.move.distance.horizontal &&
            (direction === "left" || direction === "right")) ??
            (particle.options.move.distance.vertical &&
                (direction === "top" || direction === "bottom"))) {
            return;
        }
        const gravityOptions = particle.options.move.gravity, container = this.container, canvasSize = container.canvas.size, pRadius = particle.getRadius();
        if (!gravityOptions.enable) {
            if ((particle.velocity.y > minVelocity && particle.position.y <= canvasSize.height + pRadius) ||
                (particle.velocity.y < minVelocity && particle.position.y >= -pRadius) ||
                (particle.velocity.x > minVelocity && particle.position.x <= canvasSize.width + pRadius) ||
                (particle.velocity.x < minVelocity && particle.position.x >= -pRadius)) {
                return;
            }
            if (!(0,_tsparticles_engine__WEBPACK_IMPORTED_MODULE_0__.isPointInside)(particle.position, container.canvas.size, _tsparticles_engine__WEBPACK_IMPORTED_MODULE_0__.Vector.origin, pRadius, direction)) {
                container.particles.remove(particle);
            }
        }
        else {
            const position = particle.position;
            if ((!gravityOptions.inverse &&
                position.y > canvasSize.height + pRadius &&
                direction === "bottom") ||
                (gravityOptions.inverse && position.y < -pRadius && direction === "top")) {
                container.particles.remove(particle);
            }
        }
    }
}


/***/ }),

/***/ "./node_modules/@tsparticles/updater-out-modes/browser/OutOfCanvasUpdater.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@tsparticles/updater-out-modes/browser/OutOfCanvasUpdater.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   OutOfCanvasUpdater: () => (/* binding */ OutOfCanvasUpdater)
/* harmony export */ });
/* harmony import */ var _BounceOutMode_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./BounceOutMode.js */ "./node_modules/@tsparticles/updater-out-modes/browser/BounceOutMode.js");
/* harmony import */ var _DestroyOutMode_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./DestroyOutMode.js */ "./node_modules/@tsparticles/updater-out-modes/browser/DestroyOutMode.js");
/* harmony import */ var _NoneOutMode_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./NoneOutMode.js */ "./node_modules/@tsparticles/updater-out-modes/browser/NoneOutMode.js");
/* harmony import */ var _OutOutMode_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./OutOutMode.js */ "./node_modules/@tsparticles/updater-out-modes/browser/OutOutMode.js");




const checkOutMode = (outModes, outMode) => {
    return (outModes.default === outMode ||
        outModes.bottom === outMode ||
        outModes.left === outMode ||
        outModes.right === outMode ||
        outModes.top === outMode);
};
class OutOfCanvasUpdater {
    constructor(container) {
        this._updateOutMode = (particle, delta, outMode, direction) => {
            for (const updater of this.updaters) {
                updater.update(particle, direction, delta, outMode);
            }
        };
        this.container = container;
        this.updaters = [];
    }
    init(particle) {
        this.updaters = [];
        const outModes = particle.options.move.outModes;
        if (checkOutMode(outModes, "bounce")) {
            this.updaters.push(new _BounceOutMode_js__WEBPACK_IMPORTED_MODULE_0__.BounceOutMode(this.container));
        }
        else if (checkOutMode(outModes, "out")) {
            this.updaters.push(new _OutOutMode_js__WEBPACK_IMPORTED_MODULE_3__.OutOutMode(this.container));
        }
        else if (checkOutMode(outModes, "destroy")) {
            this.updaters.push(new _DestroyOutMode_js__WEBPACK_IMPORTED_MODULE_1__.DestroyOutMode(this.container));
        }
        else if (checkOutMode(outModes, "none")) {
            this.updaters.push(new _NoneOutMode_js__WEBPACK_IMPORTED_MODULE_2__.NoneOutMode(this.container));
        }
    }
    isEnabled(particle) {
        return !particle.destroyed && !particle.spawning;
    }
    update(particle, delta) {
        const outModes = particle.options.move.outModes;
        this._updateOutMode(particle, delta, outModes.bottom ?? outModes.default, "bottom");
        this._updateOutMode(particle, delta, outModes.left ?? outModes.default, "left");
        this._updateOutMode(particle, delta, outModes.right ?? outModes.default, "right");
        this._updateOutMode(particle, delta, outModes.top ?? outModes.default, "top");
    }
}


/***/ }),

/***/ "./node_modules/@tsparticles/updater-out-modes/browser/OutOutMode.js":
/*!***************************************************************************!*\
  !*** ./node_modules/@tsparticles/updater-out-modes/browser/OutOutMode.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   OutOutMode: () => (/* binding */ OutOutMode)
/* harmony export */ });
/* harmony import */ var _tsparticles_engine__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tsparticles/engine */ "./node_modules/@tsparticles/engine/browser/index.js");

const minVelocity = 0, minDistance = 0;
class OutOutMode {
    constructor(container) {
        this.container = container;
        this.modes = ["out"];
    }
    update(particle, direction, delta, outMode) {
        if (!this.modes.includes(outMode)) {
            return;
        }
        const container = this.container;
        switch (particle.outType) {
            case "inside": {
                const { x: vx, y: vy } = particle.velocity;
                const circVec = _tsparticles_engine__WEBPACK_IMPORTED_MODULE_0__.Vector.origin;
                circVec.length = particle.moveCenter.radius;
                circVec.angle = particle.velocity.angle + Math.PI;
                circVec.addTo(_tsparticles_engine__WEBPACK_IMPORTED_MODULE_0__.Vector.create(particle.moveCenter));
                const { dx, dy } = (0,_tsparticles_engine__WEBPACK_IMPORTED_MODULE_0__.getDistances)(particle.position, circVec);
                if ((vx <= minVelocity && dx >= minDistance) ||
                    (vy <= minVelocity && dy >= minDistance) ||
                    (vx >= minVelocity && dx <= minDistance) ||
                    (vy >= minVelocity && dy <= minDistance)) {
                    return;
                }
                particle.position.x = Math.floor((0,_tsparticles_engine__WEBPACK_IMPORTED_MODULE_0__.randomInRange)({
                    min: 0,
                    max: container.canvas.size.width,
                }));
                particle.position.y = Math.floor((0,_tsparticles_engine__WEBPACK_IMPORTED_MODULE_0__.randomInRange)({
                    min: 0,
                    max: container.canvas.size.height,
                }));
                const { dx: newDx, dy: newDy } = (0,_tsparticles_engine__WEBPACK_IMPORTED_MODULE_0__.getDistances)(particle.position, particle.moveCenter);
                particle.direction = Math.atan2(-newDy, -newDx);
                particle.velocity.angle = particle.direction;
                break;
            }
            default: {
                if ((0,_tsparticles_engine__WEBPACK_IMPORTED_MODULE_0__.isPointInside)(particle.position, container.canvas.size, _tsparticles_engine__WEBPACK_IMPORTED_MODULE_0__.Vector.origin, particle.getRadius(), direction)) {
                    return;
                }
                switch (particle.outType) {
                    case "outside": {
                        particle.position.x =
                            Math.floor((0,_tsparticles_engine__WEBPACK_IMPORTED_MODULE_0__.randomInRange)({
                                min: -particle.moveCenter.radius,
                                max: particle.moveCenter.radius,
                            })) + particle.moveCenter.x;
                        particle.position.y =
                            Math.floor((0,_tsparticles_engine__WEBPACK_IMPORTED_MODULE_0__.randomInRange)({
                                min: -particle.moveCenter.radius,
                                max: particle.moveCenter.radius,
                            })) + particle.moveCenter.y;
                        const { dx, dy } = (0,_tsparticles_engine__WEBPACK_IMPORTED_MODULE_0__.getDistances)(particle.position, particle.moveCenter);
                        if (particle.moveCenter.radius) {
                            particle.direction = Math.atan2(dy, dx);
                            particle.velocity.angle = particle.direction;
                        }
                        break;
                    }
                    case "normal": {
                        const warp = particle.options.move.warp, canvasSize = container.canvas.size, newPos = {
                            bottom: canvasSize.height + particle.getRadius() + particle.offset.y,
                            left: -particle.getRadius() - particle.offset.x,
                            right: canvasSize.width + particle.getRadius() + particle.offset.x,
                            top: -particle.getRadius() - particle.offset.y,
                        }, sizeValue = particle.getRadius(), nextBounds = (0,_tsparticles_engine__WEBPACK_IMPORTED_MODULE_0__.calculateBounds)(particle.position, sizeValue);
                        if (direction === "right" &&
                            nextBounds.left > canvasSize.width + particle.offset.x) {
                            particle.position.x = newPos.left;
                            particle.initialPosition.x = particle.position.x;
                            if (!warp) {
                                particle.position.y = (0,_tsparticles_engine__WEBPACK_IMPORTED_MODULE_0__.getRandom)() * canvasSize.height;
                                particle.initialPosition.y = particle.position.y;
                            }
                        }
                        else if (direction === "left" && nextBounds.right < -particle.offset.x) {
                            particle.position.x = newPos.right;
                            particle.initialPosition.x = particle.position.x;
                            if (!warp) {
                                particle.position.y = (0,_tsparticles_engine__WEBPACK_IMPORTED_MODULE_0__.getRandom)() * canvasSize.height;
                                particle.initialPosition.y = particle.position.y;
                            }
                        }
                        if (direction === "bottom" &&
                            nextBounds.top > canvasSize.height + particle.offset.y) {
                            if (!warp) {
                                particle.position.x = (0,_tsparticles_engine__WEBPACK_IMPORTED_MODULE_0__.getRandom)() * canvasSize.width;
                                particle.initialPosition.x = particle.position.x;
                            }
                            particle.position.y = newPos.top;
                            particle.initialPosition.y = particle.position.y;
                        }
                        else if (direction === "top" && nextBounds.bottom < -particle.offset.y) {
                            if (!warp) {
                                particle.position.x = (0,_tsparticles_engine__WEBPACK_IMPORTED_MODULE_0__.getRandom)() * canvasSize.width;
                                particle.initialPosition.x = particle.position.x;
                            }
                            particle.position.y = newPos.bottom;
                            particle.initialPosition.y = particle.position.y;
                        }
                        break;
                    }
                }
                break;
            }
        }
    }
}


/***/ }),

/***/ "./node_modules/@tsparticles/updater-out-modes/browser/Utils.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@tsparticles/updater-out-modes/browser/Utils.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   bounceHorizontal: () => (/* binding */ bounceHorizontal),
/* harmony export */   bounceVertical: () => (/* binding */ bounceVertical)
/* harmony export */ });
/* harmony import */ var _tsparticles_engine__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tsparticles/engine */ "./node_modules/@tsparticles/engine/browser/index.js");

const minVelocity = 0, boundsMin = 0;
function bounceHorizontal(data) {
    if ((data.outMode !== "bounce" && data.outMode !== "split") ||
        (data.direction !== "left" && data.direction !== "right")) {
        return;
    }
    if (data.bounds.right < boundsMin && data.direction === "left") {
        data.particle.position.x = data.size + data.offset.x;
    }
    else if (data.bounds.left > data.canvasSize.width && data.direction === "right") {
        data.particle.position.x = data.canvasSize.width - data.size - data.offset.x;
    }
    const velocity = data.particle.velocity.x;
    let bounced = false;
    if ((data.direction === "right" &&
        data.bounds.right >= data.canvasSize.width &&
        velocity > minVelocity) ||
        (data.direction === "left" && data.bounds.left <= boundsMin && velocity < minVelocity)) {
        const newVelocity = (0,_tsparticles_engine__WEBPACK_IMPORTED_MODULE_0__.getRangeValue)(data.particle.options.bounce.horizontal.value);
        data.particle.velocity.x *= -newVelocity;
        bounced = true;
    }
    if (!bounced) {
        return;
    }
    const minPos = data.offset.x + data.size;
    if (data.bounds.right >= data.canvasSize.width && data.direction === "right") {
        data.particle.position.x = data.canvasSize.width - minPos;
    }
    else if (data.bounds.left <= boundsMin && data.direction === "left") {
        data.particle.position.x = minPos;
    }
    if (data.outMode === "split") {
        data.particle.destroy();
    }
}
function bounceVertical(data) {
    if ((data.outMode !== "bounce" && data.outMode !== "split") ||
        (data.direction !== "bottom" && data.direction !== "top")) {
        return;
    }
    if (data.bounds.bottom < boundsMin && data.direction === "top") {
        data.particle.position.y = data.size + data.offset.y;
    }
    else if (data.bounds.top > data.canvasSize.height && data.direction === "bottom") {
        data.particle.position.y = data.canvasSize.height - data.size - data.offset.y;
    }
    const velocity = data.particle.velocity.y;
    let bounced = false;
    if ((data.direction === "bottom" &&
        data.bounds.bottom >= data.canvasSize.height &&
        velocity > minVelocity) ||
        (data.direction === "top" && data.bounds.top <= boundsMin && velocity < minVelocity)) {
        const newVelocity = (0,_tsparticles_engine__WEBPACK_IMPORTED_MODULE_0__.getRangeValue)(data.particle.options.bounce.vertical.value);
        data.particle.velocity.y *= -newVelocity;
        bounced = true;
    }
    if (!bounced) {
        return;
    }
    const minPos = data.offset.y + data.size;
    if (data.bounds.bottom >= data.canvasSize.height && data.direction === "bottom") {
        data.particle.position.y = data.canvasSize.height - minPos;
    }
    else if (data.bounds.top <= boundsMin && data.direction === "top") {
        data.particle.position.y = minPos;
    }
    if (data.outMode === "split") {
        data.particle.destroy();
    }
}


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmVuZG9ycy1ub2RlX21vZHVsZXNfdHNwYXJ0aWNsZXNfdXBkYXRlci1vdXQtbW9kZXNfYnJvd3Nlcl9PdXRPZkNhbnZhc1VwZGF0ZXJfanMubWFzdGVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUF1RDtBQUNPO0FBQ3ZEO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEdBQTRHLG9FQUFlO0FBQzNILFFBQVEsMkRBQWdCLEdBQUcsZ0VBQWdFO0FBQzNGLFFBQVEseURBQWMsR0FBRyxnRUFBZ0U7QUFDekY7QUFDQTs7Ozs7Ozs7Ozs7Ozs7OztBQy9CMkU7QUFDM0U7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixrRUFBYSwyQ0FBMkMsdURBQU07QUFDbEY7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsU0FBUyxFQUFFLGlFQUFZLDRDQUE0QyxlQUFlO0FBQzFHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7OztBQ2hDNkQ7QUFDN0Q7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLGtFQUFhLDJDQUEyQyx1REFBTTtBQUMvRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDdkNtRDtBQUNFO0FBQ047QUFDRjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsNERBQWE7QUFDaEQ7QUFDQTtBQUNBLG1DQUFtQyxzREFBVTtBQUM3QztBQUNBO0FBQ0EsbUNBQW1DLDhEQUFjO0FBQ2pEO0FBQ0E7QUFDQSxtQ0FBbUMsd0RBQVc7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7QUMvQ3NIO0FBQ3RIO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGVBQWU7QUFDdkMsZ0NBQWdDLHVEQUFNO0FBQ3RDO0FBQ0E7QUFDQSw4QkFBOEIsdURBQU07QUFDcEMsd0JBQXdCLFNBQVMsRUFBRSxpRUFBWTtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpREFBaUQsa0VBQWE7QUFDOUQ7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixpREFBaUQsa0VBQWE7QUFDOUQ7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQix3QkFBd0IsdUJBQXVCLEVBQUUsaUVBQVk7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixrRUFBYSwyQ0FBMkMsdURBQU07QUFDbEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QyxrRUFBYTtBQUNwRDtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0EsdUNBQXVDLGtFQUFhO0FBQ3BEO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0IsZ0NBQWdDLFNBQVMsRUFBRSxpRUFBWTtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsaURBQWlELG9FQUFlO0FBQ3pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBc0QsOERBQVM7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBc0QsOERBQVM7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0RBQXNELDhEQUFTO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0RBQXNELDhEQUFTO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7OztBQzlHb0Q7QUFDcEQ7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLGtFQUFhO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLGtFQUFhO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92c2hiLmxvY2FsLy4vbm9kZV9tb2R1bGVzL0B0c3BhcnRpY2xlcy91cGRhdGVyLW91dC1tb2Rlcy9icm93c2VyL0JvdW5jZU91dE1vZGUuanMiLCJ3ZWJwYWNrOi8vdnNoYi5sb2NhbC8uL25vZGVfbW9kdWxlcy9AdHNwYXJ0aWNsZXMvdXBkYXRlci1vdXQtbW9kZXMvYnJvd3Nlci9EZXN0cm95T3V0TW9kZS5qcyIsIndlYnBhY2s6Ly92c2hiLmxvY2FsLy4vbm9kZV9tb2R1bGVzL0B0c3BhcnRpY2xlcy91cGRhdGVyLW91dC1tb2Rlcy9icm93c2VyL05vbmVPdXRNb2RlLmpzIiwid2VicGFjazovL3ZzaGIubG9jYWwvLi9ub2RlX21vZHVsZXMvQHRzcGFydGljbGVzL3VwZGF0ZXItb3V0LW1vZGVzL2Jyb3dzZXIvT3V0T2ZDYW52YXNVcGRhdGVyLmpzIiwid2VicGFjazovL3ZzaGIubG9jYWwvLi9ub2RlX21vZHVsZXMvQHRzcGFydGljbGVzL3VwZGF0ZXItb3V0LW1vZGVzL2Jyb3dzZXIvT3V0T3V0TW9kZS5qcyIsIndlYnBhY2s6Ly92c2hiLmxvY2FsLy4vbm9kZV9tb2R1bGVzL0B0c3BhcnRpY2xlcy91cGRhdGVyLW91dC1tb2Rlcy9icm93c2VyL1V0aWxzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNhbGN1bGF0ZUJvdW5kcywgfSBmcm9tIFwiQHRzcGFydGljbGVzL2VuZ2luZVwiO1xuaW1wb3J0IHsgYm91bmNlSG9yaXpvbnRhbCwgYm91bmNlVmVydGljYWwgfSBmcm9tIFwiLi9VdGlscy5qc1wiO1xuZXhwb3J0IGNsYXNzIEJvdW5jZU91dE1vZGUge1xuICAgIGNvbnN0cnVjdG9yKGNvbnRhaW5lcikge1xuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcbiAgICAgICAgdGhpcy5tb2RlcyA9IFtcbiAgICAgICAgICAgIFwiYm91bmNlXCIsXG4gICAgICAgICAgICBcInNwbGl0XCIsXG4gICAgICAgIF07XG4gICAgfVxuICAgIHVwZGF0ZShwYXJ0aWNsZSwgZGlyZWN0aW9uLCBkZWx0YSwgb3V0TW9kZSkge1xuICAgICAgICBpZiAoIXRoaXMubW9kZXMuaW5jbHVkZXMob3V0TW9kZSkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLmNvbnRhaW5lcjtcbiAgICAgICAgbGV0IGhhbmRsZWQgPSBmYWxzZTtcbiAgICAgICAgZm9yIChjb25zdCBbLCBwbHVnaW5dIG9mIGNvbnRhaW5lci5wbHVnaW5zKSB7XG4gICAgICAgICAgICBpZiAocGx1Z2luLnBhcnRpY2xlQm91bmNlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBoYW5kbGVkID0gcGx1Z2luLnBhcnRpY2xlQm91bmNlKHBhcnRpY2xlLCBkZWx0YSwgZGlyZWN0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChoYW5kbGVkKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGhhbmRsZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwb3MgPSBwYXJ0aWNsZS5nZXRQb3NpdGlvbigpLCBvZmZzZXQgPSBwYXJ0aWNsZS5vZmZzZXQsIHNpemUgPSBwYXJ0aWNsZS5nZXRSYWRpdXMoKSwgYm91bmRzID0gY2FsY3VsYXRlQm91bmRzKHBvcywgc2l6ZSksIGNhbnZhc1NpemUgPSBjb250YWluZXIuY2FudmFzLnNpemU7XG4gICAgICAgIGJvdW5jZUhvcml6b250YWwoeyBwYXJ0aWNsZSwgb3V0TW9kZSwgZGlyZWN0aW9uLCBib3VuZHMsIGNhbnZhc1NpemUsIG9mZnNldCwgc2l6ZSB9KTtcbiAgICAgICAgYm91bmNlVmVydGljYWwoeyBwYXJ0aWNsZSwgb3V0TW9kZSwgZGlyZWN0aW9uLCBib3VuZHMsIGNhbnZhc1NpemUsIG9mZnNldCwgc2l6ZSB9KTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBWZWN0b3IsIGdldERpc3RhbmNlcywgaXNQb2ludEluc2lkZSwgfSBmcm9tIFwiQHRzcGFydGljbGVzL2VuZ2luZVwiO1xuY29uc3QgbWluVmVsb2NpdHkgPSAwO1xuZXhwb3J0IGNsYXNzIERlc3Ryb3lPdXRNb2RlIHtcbiAgICBjb25zdHJ1Y3Rvcihjb250YWluZXIpIHtcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XG4gICAgICAgIHRoaXMubW9kZXMgPSBbXCJkZXN0cm95XCJdO1xuICAgIH1cbiAgICB1cGRhdGUocGFydGljbGUsIGRpcmVjdGlvbiwgX2RlbHRhLCBvdXRNb2RlKSB7XG4gICAgICAgIGlmICghdGhpcy5tb2Rlcy5pbmNsdWRlcyhvdXRNb2RlKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyO1xuICAgICAgICBzd2l0Y2ggKHBhcnRpY2xlLm91dFR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgXCJub3JtYWxcIjpcbiAgICAgICAgICAgIGNhc2UgXCJvdXRzaWRlXCI6XG4gICAgICAgICAgICAgICAgaWYgKGlzUG9pbnRJbnNpZGUocGFydGljbGUucG9zaXRpb24sIGNvbnRhaW5lci5jYW52YXMuc2l6ZSwgVmVjdG9yLm9yaWdpbiwgcGFydGljbGUuZ2V0UmFkaXVzKCksIGRpcmVjdGlvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJpbnNpZGVcIjoge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgZHgsIGR5IH0gPSBnZXREaXN0YW5jZXMocGFydGljbGUucG9zaXRpb24sIHBhcnRpY2xlLm1vdmVDZW50ZXIpLCB7IHg6IHZ4LCB5OiB2eSB9ID0gcGFydGljbGUudmVsb2NpdHk7XG4gICAgICAgICAgICAgICAgaWYgKCh2eCA8IG1pblZlbG9jaXR5ICYmIGR4ID4gcGFydGljbGUubW92ZUNlbnRlci5yYWRpdXMpIHx8XG4gICAgICAgICAgICAgICAgICAgICh2eSA8IG1pblZlbG9jaXR5ICYmIGR5ID4gcGFydGljbGUubW92ZUNlbnRlci5yYWRpdXMpIHx8XG4gICAgICAgICAgICAgICAgICAgICh2eCA+PSBtaW5WZWxvY2l0eSAmJiBkeCA8IC1wYXJ0aWNsZS5tb3ZlQ2VudGVyLnJhZGl1cykgfHxcbiAgICAgICAgICAgICAgICAgICAgKHZ5ID49IG1pblZlbG9jaXR5ICYmIGR5IDwgLXBhcnRpY2xlLm1vdmVDZW50ZXIucmFkaXVzKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnRhaW5lci5wYXJ0aWNsZXMucmVtb3ZlKHBhcnRpY2xlLCB1bmRlZmluZWQsIHRydWUpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IFZlY3RvciwgaXNQb2ludEluc2lkZSwgfSBmcm9tIFwiQHRzcGFydGljbGVzL2VuZ2luZVwiO1xuY29uc3QgbWluVmVsb2NpdHkgPSAwO1xuZXhwb3J0IGNsYXNzIE5vbmVPdXRNb2RlIHtcbiAgICBjb25zdHJ1Y3Rvcihjb250YWluZXIpIHtcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XG4gICAgICAgIHRoaXMubW9kZXMgPSBbXCJub25lXCJdO1xuICAgIH1cbiAgICB1cGRhdGUocGFydGljbGUsIGRpcmVjdGlvbiwgZGVsdGEsIG91dE1vZGUpIHtcbiAgICAgICAgaWYgKCF0aGlzLm1vZGVzLmluY2x1ZGVzKG91dE1vZGUpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKChwYXJ0aWNsZS5vcHRpb25zLm1vdmUuZGlzdGFuY2UuaG9yaXpvbnRhbCAmJlxuICAgICAgICAgICAgKGRpcmVjdGlvbiA9PT0gXCJsZWZ0XCIgfHwgZGlyZWN0aW9uID09PSBcInJpZ2h0XCIpKSA/P1xuICAgICAgICAgICAgKHBhcnRpY2xlLm9wdGlvbnMubW92ZS5kaXN0YW5jZS52ZXJ0aWNhbCAmJlxuICAgICAgICAgICAgICAgIChkaXJlY3Rpb24gPT09IFwidG9wXCIgfHwgZGlyZWN0aW9uID09PSBcImJvdHRvbVwiKSkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBncmF2aXR5T3B0aW9ucyA9IHBhcnRpY2xlLm9wdGlvbnMubW92ZS5ncmF2aXR5LCBjb250YWluZXIgPSB0aGlzLmNvbnRhaW5lciwgY2FudmFzU2l6ZSA9IGNvbnRhaW5lci5jYW52YXMuc2l6ZSwgcFJhZGl1cyA9IHBhcnRpY2xlLmdldFJhZGl1cygpO1xuICAgICAgICBpZiAoIWdyYXZpdHlPcHRpb25zLmVuYWJsZSkge1xuICAgICAgICAgICAgaWYgKChwYXJ0aWNsZS52ZWxvY2l0eS55ID4gbWluVmVsb2NpdHkgJiYgcGFydGljbGUucG9zaXRpb24ueSA8PSBjYW52YXNTaXplLmhlaWdodCArIHBSYWRpdXMpIHx8XG4gICAgICAgICAgICAgICAgKHBhcnRpY2xlLnZlbG9jaXR5LnkgPCBtaW5WZWxvY2l0eSAmJiBwYXJ0aWNsZS5wb3NpdGlvbi55ID49IC1wUmFkaXVzKSB8fFxuICAgICAgICAgICAgICAgIChwYXJ0aWNsZS52ZWxvY2l0eS54ID4gbWluVmVsb2NpdHkgJiYgcGFydGljbGUucG9zaXRpb24ueCA8PSBjYW52YXNTaXplLndpZHRoICsgcFJhZGl1cykgfHxcbiAgICAgICAgICAgICAgICAocGFydGljbGUudmVsb2NpdHkueCA8IG1pblZlbG9jaXR5ICYmIHBhcnRpY2xlLnBvc2l0aW9uLnggPj0gLXBSYWRpdXMpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFpc1BvaW50SW5zaWRlKHBhcnRpY2xlLnBvc2l0aW9uLCBjb250YWluZXIuY2FudmFzLnNpemUsIFZlY3Rvci5vcmlnaW4sIHBSYWRpdXMsIGRpcmVjdGlvbikpIHtcbiAgICAgICAgICAgICAgICBjb250YWluZXIucGFydGljbGVzLnJlbW92ZShwYXJ0aWNsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBwb3NpdGlvbiA9IHBhcnRpY2xlLnBvc2l0aW9uO1xuICAgICAgICAgICAgaWYgKCghZ3Jhdml0eU9wdGlvbnMuaW52ZXJzZSAmJlxuICAgICAgICAgICAgICAgIHBvc2l0aW9uLnkgPiBjYW52YXNTaXplLmhlaWdodCArIHBSYWRpdXMgJiZcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb24gPT09IFwiYm90dG9tXCIpIHx8XG4gICAgICAgICAgICAgICAgKGdyYXZpdHlPcHRpb25zLmludmVyc2UgJiYgcG9zaXRpb24ueSA8IC1wUmFkaXVzICYmIGRpcmVjdGlvbiA9PT0gXCJ0b3BcIikpIHtcbiAgICAgICAgICAgICAgICBjb250YWluZXIucGFydGljbGVzLnJlbW92ZShwYXJ0aWNsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQgeyBCb3VuY2VPdXRNb2RlIH0gZnJvbSBcIi4vQm91bmNlT3V0TW9kZS5qc1wiO1xuaW1wb3J0IHsgRGVzdHJveU91dE1vZGUgfSBmcm9tIFwiLi9EZXN0cm95T3V0TW9kZS5qc1wiO1xuaW1wb3J0IHsgTm9uZU91dE1vZGUgfSBmcm9tIFwiLi9Ob25lT3V0TW9kZS5qc1wiO1xuaW1wb3J0IHsgT3V0T3V0TW9kZSB9IGZyb20gXCIuL091dE91dE1vZGUuanNcIjtcbmNvbnN0IGNoZWNrT3V0TW9kZSA9IChvdXRNb2Rlcywgb3V0TW9kZSkgPT4ge1xuICAgIHJldHVybiAob3V0TW9kZXMuZGVmYXVsdCA9PT0gb3V0TW9kZSB8fFxuICAgICAgICBvdXRNb2Rlcy5ib3R0b20gPT09IG91dE1vZGUgfHxcbiAgICAgICAgb3V0TW9kZXMubGVmdCA9PT0gb3V0TW9kZSB8fFxuICAgICAgICBvdXRNb2Rlcy5yaWdodCA9PT0gb3V0TW9kZSB8fFxuICAgICAgICBvdXRNb2Rlcy50b3AgPT09IG91dE1vZGUpO1xufTtcbmV4cG9ydCBjbGFzcyBPdXRPZkNhbnZhc1VwZGF0ZXIge1xuICAgIGNvbnN0cnVjdG9yKGNvbnRhaW5lcikge1xuICAgICAgICB0aGlzLl91cGRhdGVPdXRNb2RlID0gKHBhcnRpY2xlLCBkZWx0YSwgb3V0TW9kZSwgZGlyZWN0aW9uKSA9PiB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHVwZGF0ZXIgb2YgdGhpcy51cGRhdGVycykge1xuICAgICAgICAgICAgICAgIHVwZGF0ZXIudXBkYXRlKHBhcnRpY2xlLCBkaXJlY3Rpb24sIGRlbHRhLCBvdXRNb2RlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XG4gICAgICAgIHRoaXMudXBkYXRlcnMgPSBbXTtcbiAgICB9XG4gICAgaW5pdChwYXJ0aWNsZSkge1xuICAgICAgICB0aGlzLnVwZGF0ZXJzID0gW107XG4gICAgICAgIGNvbnN0IG91dE1vZGVzID0gcGFydGljbGUub3B0aW9ucy5tb3ZlLm91dE1vZGVzO1xuICAgICAgICBpZiAoY2hlY2tPdXRNb2RlKG91dE1vZGVzLCBcImJvdW5jZVwiKSkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVycy5wdXNoKG5ldyBCb3VuY2VPdXRNb2RlKHRoaXMuY29udGFpbmVyKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY2hlY2tPdXRNb2RlKG91dE1vZGVzLCBcIm91dFwiKSkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVycy5wdXNoKG5ldyBPdXRPdXRNb2RlKHRoaXMuY29udGFpbmVyKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY2hlY2tPdXRNb2RlKG91dE1vZGVzLCBcImRlc3Ryb3lcIikpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlcnMucHVzaChuZXcgRGVzdHJveU91dE1vZGUodGhpcy5jb250YWluZXIpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjaGVja091dE1vZGUob3V0TW9kZXMsIFwibm9uZVwiKSkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVycy5wdXNoKG5ldyBOb25lT3V0TW9kZSh0aGlzLmNvbnRhaW5lcikpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlzRW5hYmxlZChwYXJ0aWNsZSkge1xuICAgICAgICByZXR1cm4gIXBhcnRpY2xlLmRlc3Ryb3llZCAmJiAhcGFydGljbGUuc3Bhd25pbmc7XG4gICAgfVxuICAgIHVwZGF0ZShwYXJ0aWNsZSwgZGVsdGEpIHtcbiAgICAgICAgY29uc3Qgb3V0TW9kZXMgPSBwYXJ0aWNsZS5vcHRpb25zLm1vdmUub3V0TW9kZXM7XG4gICAgICAgIHRoaXMuX3VwZGF0ZU91dE1vZGUocGFydGljbGUsIGRlbHRhLCBvdXRNb2Rlcy5ib3R0b20gPz8gb3V0TW9kZXMuZGVmYXVsdCwgXCJib3R0b21cIik7XG4gICAgICAgIHRoaXMuX3VwZGF0ZU91dE1vZGUocGFydGljbGUsIGRlbHRhLCBvdXRNb2Rlcy5sZWZ0ID8/IG91dE1vZGVzLmRlZmF1bHQsIFwibGVmdFwiKTtcbiAgICAgICAgdGhpcy5fdXBkYXRlT3V0TW9kZShwYXJ0aWNsZSwgZGVsdGEsIG91dE1vZGVzLnJpZ2h0ID8/IG91dE1vZGVzLmRlZmF1bHQsIFwicmlnaHRcIik7XG4gICAgICAgIHRoaXMuX3VwZGF0ZU91dE1vZGUocGFydGljbGUsIGRlbHRhLCBvdXRNb2Rlcy50b3AgPz8gb3V0TW9kZXMuZGVmYXVsdCwgXCJ0b3BcIik7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgVmVjdG9yLCBjYWxjdWxhdGVCb3VuZHMsIGdldERpc3RhbmNlcywgZ2V0UmFuZG9tLCBpc1BvaW50SW5zaWRlLCByYW5kb21JblJhbmdlLCB9IGZyb20gXCJAdHNwYXJ0aWNsZXMvZW5naW5lXCI7XG5jb25zdCBtaW5WZWxvY2l0eSA9IDAsIG1pbkRpc3RhbmNlID0gMDtcbmV4cG9ydCBjbGFzcyBPdXRPdXRNb2RlIHtcbiAgICBjb25zdHJ1Y3Rvcihjb250YWluZXIpIHtcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XG4gICAgICAgIHRoaXMubW9kZXMgPSBbXCJvdXRcIl07XG4gICAgfVxuICAgIHVwZGF0ZShwYXJ0aWNsZSwgZGlyZWN0aW9uLCBkZWx0YSwgb3V0TW9kZSkge1xuICAgICAgICBpZiAoIXRoaXMubW9kZXMuaW5jbHVkZXMob3V0TW9kZSkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLmNvbnRhaW5lcjtcbiAgICAgICAgc3dpdGNoIChwYXJ0aWNsZS5vdXRUeXBlKSB7XG4gICAgICAgICAgICBjYXNlIFwiaW5zaWRlXCI6IHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IHg6IHZ4LCB5OiB2eSB9ID0gcGFydGljbGUudmVsb2NpdHk7XG4gICAgICAgICAgICAgICAgY29uc3QgY2lyY1ZlYyA9IFZlY3Rvci5vcmlnaW47XG4gICAgICAgICAgICAgICAgY2lyY1ZlYy5sZW5ndGggPSBwYXJ0aWNsZS5tb3ZlQ2VudGVyLnJhZGl1cztcbiAgICAgICAgICAgICAgICBjaXJjVmVjLmFuZ2xlID0gcGFydGljbGUudmVsb2NpdHkuYW5nbGUgKyBNYXRoLlBJO1xuICAgICAgICAgICAgICAgIGNpcmNWZWMuYWRkVG8oVmVjdG9yLmNyZWF0ZShwYXJ0aWNsZS5tb3ZlQ2VudGVyKSk7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBkeCwgZHkgfSA9IGdldERpc3RhbmNlcyhwYXJ0aWNsZS5wb3NpdGlvbiwgY2lyY1ZlYyk7XG4gICAgICAgICAgICAgICAgaWYgKCh2eCA8PSBtaW5WZWxvY2l0eSAmJiBkeCA+PSBtaW5EaXN0YW5jZSkgfHxcbiAgICAgICAgICAgICAgICAgICAgKHZ5IDw9IG1pblZlbG9jaXR5ICYmIGR5ID49IG1pbkRpc3RhbmNlKSB8fFxuICAgICAgICAgICAgICAgICAgICAodnggPj0gbWluVmVsb2NpdHkgJiYgZHggPD0gbWluRGlzdGFuY2UpIHx8XG4gICAgICAgICAgICAgICAgICAgICh2eSA+PSBtaW5WZWxvY2l0eSAmJiBkeSA8PSBtaW5EaXN0YW5jZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwYXJ0aWNsZS5wb3NpdGlvbi54ID0gTWF0aC5mbG9vcihyYW5kb21JblJhbmdlKHtcbiAgICAgICAgICAgICAgICAgICAgbWluOiAwLFxuICAgICAgICAgICAgICAgICAgICBtYXg6IGNvbnRhaW5lci5jYW52YXMuc2l6ZS53aWR0aCxcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgcGFydGljbGUucG9zaXRpb24ueSA9IE1hdGguZmxvb3IocmFuZG9tSW5SYW5nZSh7XG4gICAgICAgICAgICAgICAgICAgIG1pbjogMCxcbiAgICAgICAgICAgICAgICAgICAgbWF4OiBjb250YWluZXIuY2FudmFzLnNpemUuaGVpZ2h0LFxuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICBjb25zdCB7IGR4OiBuZXdEeCwgZHk6IG5ld0R5IH0gPSBnZXREaXN0YW5jZXMocGFydGljbGUucG9zaXRpb24sIHBhcnRpY2xlLm1vdmVDZW50ZXIpO1xuICAgICAgICAgICAgICAgIHBhcnRpY2xlLmRpcmVjdGlvbiA9IE1hdGguYXRhbjIoLW5ld0R5LCAtbmV3RHgpO1xuICAgICAgICAgICAgICAgIHBhcnRpY2xlLnZlbG9jaXR5LmFuZ2xlID0gcGFydGljbGUuZGlyZWN0aW9uO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgICAgIGlmIChpc1BvaW50SW5zaWRlKHBhcnRpY2xlLnBvc2l0aW9uLCBjb250YWluZXIuY2FudmFzLnNpemUsIFZlY3Rvci5vcmlnaW4sIHBhcnRpY2xlLmdldFJhZGl1cygpLCBkaXJlY3Rpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc3dpdGNoIChwYXJ0aWNsZS5vdXRUeXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJvdXRzaWRlXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnRpY2xlLnBvc2l0aW9uLnggPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGguZmxvb3IocmFuZG9tSW5SYW5nZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbjogLXBhcnRpY2xlLm1vdmVDZW50ZXIucmFkaXVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXg6IHBhcnRpY2xlLm1vdmVDZW50ZXIucmFkaXVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSArIHBhcnRpY2xlLm1vdmVDZW50ZXIueDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnRpY2xlLnBvc2l0aW9uLnkgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGguZmxvb3IocmFuZG9tSW5SYW5nZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbjogLXBhcnRpY2xlLm1vdmVDZW50ZXIucmFkaXVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXg6IHBhcnRpY2xlLm1vdmVDZW50ZXIucmFkaXVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSArIHBhcnRpY2xlLm1vdmVDZW50ZXIueTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgZHgsIGR5IH0gPSBnZXREaXN0YW5jZXMocGFydGljbGUucG9zaXRpb24sIHBhcnRpY2xlLm1vdmVDZW50ZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnRpY2xlLm1vdmVDZW50ZXIucmFkaXVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFydGljbGUuZGlyZWN0aW9uID0gTWF0aC5hdGFuMihkeSwgZHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnRpY2xlLnZlbG9jaXR5LmFuZ2xlID0gcGFydGljbGUuZGlyZWN0aW9uO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIm5vcm1hbFwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB3YXJwID0gcGFydGljbGUub3B0aW9ucy5tb3ZlLndhcnAsIGNhbnZhc1NpemUgPSBjb250YWluZXIuY2FudmFzLnNpemUsIG5ld1BvcyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3R0b206IGNhbnZhc1NpemUuaGVpZ2h0ICsgcGFydGljbGUuZ2V0UmFkaXVzKCkgKyBwYXJ0aWNsZS5vZmZzZXQueSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiAtcGFydGljbGUuZ2V0UmFkaXVzKCkgLSBwYXJ0aWNsZS5vZmZzZXQueCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByaWdodDogY2FudmFzU2l6ZS53aWR0aCArIHBhcnRpY2xlLmdldFJhZGl1cygpICsgcGFydGljbGUub2Zmc2V0LngsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiAtcGFydGljbGUuZ2V0UmFkaXVzKCkgLSBwYXJ0aWNsZS5vZmZzZXQueSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHNpemVWYWx1ZSA9IHBhcnRpY2xlLmdldFJhZGl1cygpLCBuZXh0Qm91bmRzID0gY2FsY3VsYXRlQm91bmRzKHBhcnRpY2xlLnBvc2l0aW9uLCBzaXplVmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gXCJyaWdodFwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dEJvdW5kcy5sZWZ0ID4gY2FudmFzU2l6ZS53aWR0aCArIHBhcnRpY2xlLm9mZnNldC54KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFydGljbGUucG9zaXRpb24ueCA9IG5ld1Bvcy5sZWZ0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnRpY2xlLmluaXRpYWxQb3NpdGlvbi54ID0gcGFydGljbGUucG9zaXRpb24ueDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXdhcnApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFydGljbGUucG9zaXRpb24ueSA9IGdldFJhbmRvbSgpICogY2FudmFzU2l6ZS5oZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnRpY2xlLmluaXRpYWxQb3NpdGlvbi55ID0gcGFydGljbGUucG9zaXRpb24ueTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChkaXJlY3Rpb24gPT09IFwibGVmdFwiICYmIG5leHRCb3VuZHMucmlnaHQgPCAtcGFydGljbGUub2Zmc2V0LngpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJ0aWNsZS5wb3NpdGlvbi54ID0gbmV3UG9zLnJpZ2h0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnRpY2xlLmluaXRpYWxQb3NpdGlvbi54ID0gcGFydGljbGUucG9zaXRpb24ueDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXdhcnApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFydGljbGUucG9zaXRpb24ueSA9IGdldFJhbmRvbSgpICogY2FudmFzU2l6ZS5oZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnRpY2xlLmluaXRpYWxQb3NpdGlvbi55ID0gcGFydGljbGUucG9zaXRpb24ueTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGlyZWN0aW9uID09PSBcImJvdHRvbVwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dEJvdW5kcy50b3AgPiBjYW52YXNTaXplLmhlaWdodCArIHBhcnRpY2xlLm9mZnNldC55KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF3YXJwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnRpY2xlLnBvc2l0aW9uLnggPSBnZXRSYW5kb20oKSAqIGNhbnZhc1NpemUud2lkdGg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnRpY2xlLmluaXRpYWxQb3NpdGlvbi54ID0gcGFydGljbGUucG9zaXRpb24ueDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFydGljbGUucG9zaXRpb24ueSA9IG5ld1Bvcy50b3A7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFydGljbGUuaW5pdGlhbFBvc2l0aW9uLnkgPSBwYXJ0aWNsZS5wb3NpdGlvbi55O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZGlyZWN0aW9uID09PSBcInRvcFwiICYmIG5leHRCb3VuZHMuYm90dG9tIDwgLXBhcnRpY2xlLm9mZnNldC55KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF3YXJwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnRpY2xlLnBvc2l0aW9uLnggPSBnZXRSYW5kb20oKSAqIGNhbnZhc1NpemUud2lkdGg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnRpY2xlLmluaXRpYWxQb3NpdGlvbi54ID0gcGFydGljbGUucG9zaXRpb24ueDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFydGljbGUucG9zaXRpb24ueSA9IG5ld1Bvcy5ib3R0b207XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFydGljbGUuaW5pdGlhbFBvc2l0aW9uLnkgPSBwYXJ0aWNsZS5wb3NpdGlvbi55O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQgeyBnZXRSYW5nZVZhbHVlIH0gZnJvbSBcIkB0c3BhcnRpY2xlcy9lbmdpbmVcIjtcbmNvbnN0IG1pblZlbG9jaXR5ID0gMCwgYm91bmRzTWluID0gMDtcbmV4cG9ydCBmdW5jdGlvbiBib3VuY2VIb3Jpem9udGFsKGRhdGEpIHtcbiAgICBpZiAoKGRhdGEub3V0TW9kZSAhPT0gXCJib3VuY2VcIiAmJiBkYXRhLm91dE1vZGUgIT09IFwic3BsaXRcIikgfHxcbiAgICAgICAgKGRhdGEuZGlyZWN0aW9uICE9PSBcImxlZnRcIiAmJiBkYXRhLmRpcmVjdGlvbiAhPT0gXCJyaWdodFwiKSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChkYXRhLmJvdW5kcy5yaWdodCA8IGJvdW5kc01pbiAmJiBkYXRhLmRpcmVjdGlvbiA9PT0gXCJsZWZ0XCIpIHtcbiAgICAgICAgZGF0YS5wYXJ0aWNsZS5wb3NpdGlvbi54ID0gZGF0YS5zaXplICsgZGF0YS5vZmZzZXQueDtcbiAgICB9XG4gICAgZWxzZSBpZiAoZGF0YS5ib3VuZHMubGVmdCA+IGRhdGEuY2FudmFzU2l6ZS53aWR0aCAmJiBkYXRhLmRpcmVjdGlvbiA9PT0gXCJyaWdodFwiKSB7XG4gICAgICAgIGRhdGEucGFydGljbGUucG9zaXRpb24ueCA9IGRhdGEuY2FudmFzU2l6ZS53aWR0aCAtIGRhdGEuc2l6ZSAtIGRhdGEub2Zmc2V0Lng7XG4gICAgfVxuICAgIGNvbnN0IHZlbG9jaXR5ID0gZGF0YS5wYXJ0aWNsZS52ZWxvY2l0eS54O1xuICAgIGxldCBib3VuY2VkID0gZmFsc2U7XG4gICAgaWYgKChkYXRhLmRpcmVjdGlvbiA9PT0gXCJyaWdodFwiICYmXG4gICAgICAgIGRhdGEuYm91bmRzLnJpZ2h0ID49IGRhdGEuY2FudmFzU2l6ZS53aWR0aCAmJlxuICAgICAgICB2ZWxvY2l0eSA+IG1pblZlbG9jaXR5KSB8fFxuICAgICAgICAoZGF0YS5kaXJlY3Rpb24gPT09IFwibGVmdFwiICYmIGRhdGEuYm91bmRzLmxlZnQgPD0gYm91bmRzTWluICYmIHZlbG9jaXR5IDwgbWluVmVsb2NpdHkpKSB7XG4gICAgICAgIGNvbnN0IG5ld1ZlbG9jaXR5ID0gZ2V0UmFuZ2VWYWx1ZShkYXRhLnBhcnRpY2xlLm9wdGlvbnMuYm91bmNlLmhvcml6b250YWwudmFsdWUpO1xuICAgICAgICBkYXRhLnBhcnRpY2xlLnZlbG9jaXR5LnggKj0gLW5ld1ZlbG9jaXR5O1xuICAgICAgICBib3VuY2VkID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKCFib3VuY2VkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgbWluUG9zID0gZGF0YS5vZmZzZXQueCArIGRhdGEuc2l6ZTtcbiAgICBpZiAoZGF0YS5ib3VuZHMucmlnaHQgPj0gZGF0YS5jYW52YXNTaXplLndpZHRoICYmIGRhdGEuZGlyZWN0aW9uID09PSBcInJpZ2h0XCIpIHtcbiAgICAgICAgZGF0YS5wYXJ0aWNsZS5wb3NpdGlvbi54ID0gZGF0YS5jYW52YXNTaXplLndpZHRoIC0gbWluUG9zO1xuICAgIH1cbiAgICBlbHNlIGlmIChkYXRhLmJvdW5kcy5sZWZ0IDw9IGJvdW5kc01pbiAmJiBkYXRhLmRpcmVjdGlvbiA9PT0gXCJsZWZ0XCIpIHtcbiAgICAgICAgZGF0YS5wYXJ0aWNsZS5wb3NpdGlvbi54ID0gbWluUG9zO1xuICAgIH1cbiAgICBpZiAoZGF0YS5vdXRNb2RlID09PSBcInNwbGl0XCIpIHtcbiAgICAgICAgZGF0YS5wYXJ0aWNsZS5kZXN0cm95KCk7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGJvdW5jZVZlcnRpY2FsKGRhdGEpIHtcbiAgICBpZiAoKGRhdGEub3V0TW9kZSAhPT0gXCJib3VuY2VcIiAmJiBkYXRhLm91dE1vZGUgIT09IFwic3BsaXRcIikgfHxcbiAgICAgICAgKGRhdGEuZGlyZWN0aW9uICE9PSBcImJvdHRvbVwiICYmIGRhdGEuZGlyZWN0aW9uICE9PSBcInRvcFwiKSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChkYXRhLmJvdW5kcy5ib3R0b20gPCBib3VuZHNNaW4gJiYgZGF0YS5kaXJlY3Rpb24gPT09IFwidG9wXCIpIHtcbiAgICAgICAgZGF0YS5wYXJ0aWNsZS5wb3NpdGlvbi55ID0gZGF0YS5zaXplICsgZGF0YS5vZmZzZXQueTtcbiAgICB9XG4gICAgZWxzZSBpZiAoZGF0YS5ib3VuZHMudG9wID4gZGF0YS5jYW52YXNTaXplLmhlaWdodCAmJiBkYXRhLmRpcmVjdGlvbiA9PT0gXCJib3R0b21cIikge1xuICAgICAgICBkYXRhLnBhcnRpY2xlLnBvc2l0aW9uLnkgPSBkYXRhLmNhbnZhc1NpemUuaGVpZ2h0IC0gZGF0YS5zaXplIC0gZGF0YS5vZmZzZXQueTtcbiAgICB9XG4gICAgY29uc3QgdmVsb2NpdHkgPSBkYXRhLnBhcnRpY2xlLnZlbG9jaXR5Lnk7XG4gICAgbGV0IGJvdW5jZWQgPSBmYWxzZTtcbiAgICBpZiAoKGRhdGEuZGlyZWN0aW9uID09PSBcImJvdHRvbVwiICYmXG4gICAgICAgIGRhdGEuYm91bmRzLmJvdHRvbSA+PSBkYXRhLmNhbnZhc1NpemUuaGVpZ2h0ICYmXG4gICAgICAgIHZlbG9jaXR5ID4gbWluVmVsb2NpdHkpIHx8XG4gICAgICAgIChkYXRhLmRpcmVjdGlvbiA9PT0gXCJ0b3BcIiAmJiBkYXRhLmJvdW5kcy50b3AgPD0gYm91bmRzTWluICYmIHZlbG9jaXR5IDwgbWluVmVsb2NpdHkpKSB7XG4gICAgICAgIGNvbnN0IG5ld1ZlbG9jaXR5ID0gZ2V0UmFuZ2VWYWx1ZShkYXRhLnBhcnRpY2xlLm9wdGlvbnMuYm91bmNlLnZlcnRpY2FsLnZhbHVlKTtcbiAgICAgICAgZGF0YS5wYXJ0aWNsZS52ZWxvY2l0eS55ICo9IC1uZXdWZWxvY2l0eTtcbiAgICAgICAgYm91bmNlZCA9IHRydWU7XG4gICAgfVxuICAgIGlmICghYm91bmNlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IG1pblBvcyA9IGRhdGEub2Zmc2V0LnkgKyBkYXRhLnNpemU7XG4gICAgaWYgKGRhdGEuYm91bmRzLmJvdHRvbSA+PSBkYXRhLmNhbnZhc1NpemUuaGVpZ2h0ICYmIGRhdGEuZGlyZWN0aW9uID09PSBcImJvdHRvbVwiKSB7XG4gICAgICAgIGRhdGEucGFydGljbGUucG9zaXRpb24ueSA9IGRhdGEuY2FudmFzU2l6ZS5oZWlnaHQgLSBtaW5Qb3M7XG4gICAgfVxuICAgIGVsc2UgaWYgKGRhdGEuYm91bmRzLnRvcCA8PSBib3VuZHNNaW4gJiYgZGF0YS5kaXJlY3Rpb24gPT09IFwidG9wXCIpIHtcbiAgICAgICAgZGF0YS5wYXJ0aWNsZS5wb3NpdGlvbi55ID0gbWluUG9zO1xuICAgIH1cbiAgICBpZiAoZGF0YS5vdXRNb2RlID09PSBcInNwbGl0XCIpIHtcbiAgICAgICAgZGF0YS5wYXJ0aWNsZS5kZXN0cm95KCk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9